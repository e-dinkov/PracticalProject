<div class="form-container">
  <h2>Create New Player</h2>

  @if (errorMessage()) {
    <div class="error-message">{{ errorMessage() }}</div>
  }

  <form [formGroup]="playerForm" (ngSubmit)="onSubmit()">

    <!-- Player Name -->
    <div class="form-group" [class.invalid]="f.playerName.touched && f.playerName.invalid">
      <label for="playerName">Name</label>
      <input id="playerName" type="text" formControlName="playerName" placeholder="Enter player name" />
      @if (f.playerName.touched && f.playerName.invalid) {
        <small>
          @if (f.playerName.errors?.['required']) { Name is required. }
          @if (f.playerName.errors?.['minlength']) { Name must be at least 2 characters. }
        </small>
      }
    </div>

    <!-- Player Photo -->
    <div class="form-group" [class.invalid]="f.playerPhoto.touched && f.playerPhoto.invalid">
      <label for="playerPhoto">Photo</label>
      <input id="playerPhoto" type="text" formControlName="playerPhoto" placeholder="Enter player photo URL" />
      @if (f.playerPhoto.touched && f.playerPhoto.invalid) {
        <small>
          @if (f.playerPhoto.errors?.['required']) { Photo is required. }
          @if (f.playerPhoto.errors?.['pattern']) { Must be a valid URL. }
        </small>
      }
    </div>

    <!-- Player Team -->
    <div class="form-group" [class.invalid]="f.playerTeam.touched && f.playerTeam.invalid">
      <label for="playerTeam">Team</label>
      <input id="playerTeam" type="text" formControlName="playerTeam" placeholder="Enter team" />
      @if (f.playerTeam.touched && f.playerTeam.invalid) {
        <small>Team is required.</small>
      }
    </div>

    <!-- Player Height -->
    <div class="form-group" [class.invalid]="f.playerHeight.touched && f.playerHeight.invalid">
      <label for="playerHeight">Height (cm)</label>
      <input id="playerHeight" type="text" formControlName="playerHeight" placeholder="e.g. 198" />
      @if (f.playerHeight.touched && f.playerHeight.invalid) {
        <small>
          @if (f.playerHeight.errors?.['required']) { Height is required. }
          @if (f.playerHeight.errors?.['pattern']) { Height must be a number. }
        </small>
      }
    </div>

    <!-- Player Weight -->
    <div class="form-group" [class.invalid]="f.playerWeight.touched && f.playerWeight.invalid">
      <label for="playerWeight">Weight (kg)</label>
      <input id="playerWeight" type="text" formControlName="playerWeight" placeholder="e.g. 90" />
      @if (f.playerWeight.touched && f.playerWeight.invalid) {
        <small>
          @if (f.playerWeight.errors?.['required']) { Weight is required. }
          @if (f.playerWeight.errors?.['pattern']) { Weight must be a number. }
        </small>
      }
    </div>

    <!-- Player Description -->
    <div class="form-group" [class.invalid]="f.playerDescription.touched && f.playerDescription.invalid">
      <label for="playerDescription">Description</label>
      <textarea id="playerDescription" formControlName="playerDescription" placeholder="Describe the player..."></textarea>
      @if (f.playerDescription.touched && f.playerDescription.invalid) {
        <small>
          @if (f.playerDescription.errors?.['required']) { Description is required. }
          @if (f.playerDescription.errors?.['minlength']) { Must be at least 10 characters. }
        </small>
      }
    </div>

    <div class="button-group">
      <button type="submit" [disabled]="playerForm.invalid || loading()">
        @if (loading()) { Creating... } @else { Create }
      </button>
      <button type="button" (click)="onCancel()" class="cancel">Cancel</button>
    </div>

  </form>
</div>
